<webc-container controller="iot/QuestionsListController" class="questionnaires-container" >

    <div class="container main-container stepper-3-rows-grid">

        <div class="container flex-container">
            <breadcrumb-navigator></breadcrumb-navigator>
            <h5 class="generic-title">Trial: {{@selected_trial.name}}</h5>
            <webc-template template="alert" data-view-model="@" class="w-100"></webc-template>
        </div>

        <div class="container justify-content-start">

            <div class="form-row">
                <div class="form-group">
                    <div class="questions-tab d-flex justify-content-between">
                        <div>
                            <button class="prom-prem-tab-buttons p-2" data-tag="view:prom" active="@promSelected">PROM Questions</button>
                            <button class="prom-prem-tab-buttons p-2" data-tag="view:prem" active="@premSelected">PREM Questions</button>
                        </div>
                            <div data-if="@frequencyIsSet">
                                <div slot="true" class="d-inline-flex align-items-center">
                                    <div class="mr-2">
                                        <span class="badge badge-success">
                                        {{@schedule.startDate}} - {{@schedule.endDate}} <span
                                            class="badge badge-light frequency-type">{{@schedule.frequencyType}}</span>
                                        </span>
                                    </div>
                                    <button class="prom-prem-tab-buttons p-2 mr-0" data-tag="set:frequency">Edit
                                        Questionnaire Frequency
                                    </button>
                                </div>
                                <button slot="false" class="prom-prem-tab-buttons p-2 mr-0" data-tag="set:frequency">Set Questionnaire Frequency</button>
                            </div>
                    </div>
                </div>
            </div>

            <div data-if="@pageIsInitialized">
                <webc-spinner slot="false"></webc-spinner>
                <webc-switch slot="true" condition="@currentTable">
                    <div slot="prom">

                        <div class="button-group-wrapper d-flex flex-row justify-content-end p-1">
                            <button data-tag="new:question">Add New PROM Question</button>
                        </div>

                        <div data-if="@prom.hasQuestions">
                            <webc-spinner slot="loading"></webc-spinner>
                            <div slot="false" class="alert alert-warning text-center" role="alert">
                                <h4 class="alert-heading">No Prom Questions yet!</h4>
                                <p>Add your first question!</p>
                            </div>
                            <div class="common-datatable questions-datatable dt-3-col" slot="true">
                                <webc-datatable datasource="@prom.questionsDataSource">

                                    <div slot="header">Question</div>
                                    <div slot="header">Answer type</div>
                                    <div slot="header">Options</div>

                                    <div class="cell">{{ @question }}</div>
                                    <div class="cell">{{ @type }}</div>
                                    <div class="cell">
                                        <label data-tag="edit:question" class="link option">Edit</label>
                                        <label> | </label>
                                        <label data-tag="question-delete" class="link option">Delete</label>
                                    </div>
                                </webc-datatable>
                            </div>
                        </div>
                    </div>
                    <div slot="prem">

                        <div class="button-group-wrapper d-flex flex-row justify-content-end p-1">
                            <button data-tag="new:question">Add New PREM Question</button>
                        </div>


                        <div data-if="@prem.hasQuestions">
                            <webc-spinner slot="loading"></webc-spinner>
                            <div slot="false" class="alert alert-warning text-center" role="alert">
                                <h4 class="alert-heading">No PREM question yet!</h4>
                                <p>Add your first question!</p>
                            </div>
                            <div class="common-datatable questions-datatable dt-3-col" slot="true">
                                <webc-datatable datasource="@prem.questionsDataSource">

                                    <div slot="header">Question</div>
                                    <div slot="header">Answer type</div>
                                    <div slot="header">Options</div>

                                    <div class="cell">{{ @question }}</div>
                                    <div class="cell">{{ @type }}</div>
                                    <div class="cell">
                                        <label data-tag="edit:question" class="link option">Edit</label>
                                        <label> | </label>
                                        <label data-tag="question-delete" class="link option">Delete</label>
                                    </div>
                                </webc-datatable>
                            </div>
                        </div>
                    </div>
                </webc-switch>
            </div>

        </div>
        <div>
            <p class="m-0">*PROM: Patient Reported Outcome Measures.</p>
            <p class="m-0">*PREM: Patient Reported Experience Measures.</p>
        </div>
    </div>

</webc-container>